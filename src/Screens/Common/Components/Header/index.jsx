import Link from "next/link";
import { useEffect, useState } from "react";
import { ToastContainer, toast } from "react-toastify";
import "react-toastify/dist/ReactToastify.css";

const Header = () => {
  const [items, setItems] = useState([]);

  useEffect(() => {
    const items = localStorage.getItem("token");
    if (items) {
      setItems(items);
    }
  }, []);

  const localStorageRemove = () => {
    localStorage.removeItem("token");
    toast.success("Logged out successfully!");
    console.log("Logged out successfully!");
    setTimeout(() => {
      window.location.href = "/sign-in";
    }, 2000);
  };

  return (
    <section>
      <div className="navbar_main_section">
        <ToastContainer autoClose={2000} />
        <div className="navbar_top_section">
          <nav className="navbar navbar-expand-lg">
            <div className="container-fluid justify-content-center justify-content-md-center">
              <p className="me-2 line1">45% OFF WINDOWS OF THE WEEK</p>
              <p className="line2 d-none d-sm-none d-md-none d-xl-flex">
                Pay monthly at 0% APR for purchases of $300-$10,000.
                <span
                  lang="es"
                  className="text-decoration-underline ms-1 
                "
                >
                  DETAILS
                </span>
              </p>
              <div className="collapse navbar-collapse">
                <ul className="navbar-nav mx-auto">
                  <li className="nav-item">
                    <a className="nav-link" href="#" aria-label="Get Help">
                      Get Help
                    </a>
                  </li>
                  <li className="nav-item">
                    <a
                      className="nav-link"
                      href="#"
                      aria-label="Measure & Install"
                    >
                      Measure & Install
                    </a>
                  </li>
                  <li className="nav-item">
                    <Link
                      href="/track-order"
                      className="nav-link"
                      aria-label="Order Tracking"
                    >
                      Order Tracking
                    </Link>
                  </li>
                  <li className="nav-item">
                    <a
                      className="nav-link"
                      href="#"
                      aria-label=" Create an Estimate"
                    >
                      Create an Estimate
                    </a>
                  </li>
                </ul>
                <div className="d-flex user-shopping_circle">
                  {items.length !== 0 ? (
                    <p className="m-0 me-2">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="22"
                        height="22"
                        viewBox="0 0 25 24"
                        fill="none"
                        className="me-2"
                      >
                        <path
                          d="M8.98109 8.8C8.98268 8.18959 9.16655 7.59335 9.50946 7.08658C9.85237 6.57982 10.3389 6.18527 10.9077 5.95277C11.4765 5.72027 12.1019 5.66026 12.7051 5.78031C13.3082 5.90037 13.8619 6.1951 14.2963 6.62728C14.7307 7.05946 15.0263 7.6097 15.1457 8.2085C15.2652 8.80729 15.2031 9.42777 14.9673 9.99156C14.7315 10.5554 14.3327 11.0372 13.8211 11.3761C13.3095 11.7151 12.7082 11.896 12.093 11.896C11.6834 11.8971 11.2776 11.8176 10.899 11.6623C10.5204 11.507 10.1766 11.2789 9.88731 10.9911C9.59802 10.7033 9.36901 10.3615 9.21347 9.98543C9.05794 9.60938 8.97896 9.20649 8.98109 8.8ZM20.2115 18.64V17.664C20.2118 16.6534 19.9906 15.6549 19.5632 14.7377C19.1358 13.8204 18.5125 13.0064 17.7364 12.352C17.6677 12.2485 17.5757 12.1622 17.4676 12.1001C17.3596 12.0379 17.2384 12.0015 17.1138 11.9937C16.9891 11.9859 16.8643 12.007 16.7493 12.0553C16.6342 12.1035 16.532 12.1777 16.4508 12.2718C16.3696 12.366 16.3115 12.4776 16.2811 12.5978C16.2508 12.7181 16.249 12.8437 16.276 12.9647C16.3029 13.0857 16.3579 13.1989 16.4364 13.2953C16.515 13.3916 16.615 13.4686 16.7287 13.52C17.3331 14.031 17.8185 14.6663 18.1512 15.3818C18.4839 16.0973 18.656 16.876 18.6555 17.664V20.168C16.7947 21.6509 14.4796 22.4591 12.093 22.4591C9.70645 22.4591 7.39135 21.6509 5.53055 20.168V17.664C5.53552 16.5212 5.90143 15.4088 6.5768 14.4832C7.25216 13.5576 8.20299 12.8654 9.29551 12.504C10.2297 13.1989 11.3921 13.5218 12.5541 13.4093C13.7161 13.2968 14.7936 12.7571 15.5749 11.8961C16.3561 11.0352 16.7845 9.9154 16.7759 8.7569C16.7673 7.5984 16.3222 6.48502 15.5282 5.63566C14.7342 4.7863 13.6487 4.26241 12.4852 4.167C11.3216 4.07158 10.1642 4.41155 9.24045 5.12006C8.31671 5.82856 7.69349 6.85435 7.49333 7.99572C7.29316 9.1371 7.53053 10.3115 8.15876 11.288C6.9141 11.8414 5.85705 12.7398 5.11475 13.8752C4.37245 15.0106 3.97652 16.3346 3.97458 17.688V18.688C2.89466 17.3953 2.14412 15.8636 1.78633 14.2225C1.42854 12.5813 1.47402 10.8788 1.91893 9.25874C2.36383 7.63869 3.19509 6.14867 4.34251 4.91453C5.48992 3.68039 6.91979 2.73838 8.51134 2.16805C10.1029 1.59773 11.8094 1.41584 13.4867 1.63776C15.164 1.85967 16.7628 2.47887 18.1482 3.44306C19.5336 4.40724 20.6648 5.6881 21.4462 7.17744C22.2277 8.66678 22.6365 10.3209 22.6381 12C22.6403 14.4347 21.7815 16.793 20.2115 18.664V18.64ZM12.093 0C9.70125 0 7.36319 0.703788 5.3745 2.02236C3.38582 3.34094 1.83582 5.21508 0.920532 7.4078C0.00523983 9.60051 -0.234242 12.0133 0.232369 14.3411C0.698981 16.6689 1.85073 18.807 3.54197 20.4853C5.23321 22.1635 7.38798 23.3064 9.73379 23.7694C12.0796 24.2324 14.5111 23.9948 16.7208 23.0865C18.9305 22.1783 20.8192 20.6402 22.148 18.6668C23.4768 16.6934 24.186 14.3734 24.186 12C24.186 8.8174 22.912 5.76515 20.6441 3.51472C18.3762 1.26428 15.3003 0 12.093 0Z"
                          fill="white"
                        />
                      </svg>

                      <div class="dropdown">
                        <a
                          className="text-light text-decoration-none"
                          data-bs-toggle="dropdown"
                          aria-expanded="false"
                        >
                          Account In
                        </a>
                        <ul class="dropdown-menu w-25 mt-3">
                          <li>
                            <button
                              onClick={localStorageRemove}
                              class="dropdown-item d-flex"
                              type="button"
                            >
                              ↳ Sign Out
                            </button>
                          </li>
                          <li>
                            <button class="dropdown-item" type="button">
                              Another action
                            </button>
                          </li>
                          <li>
                            <button class="dropdown-item" type="button">
                              Something else here
                            </button>
                          </li>
                        </ul>
                      </div>
                    </p>
                  ) : (
                    <p className="m-0 me-2">
                      <Link
                        href="/sign-in"
                        className="text-decoration-none text-white"
                        aria-label="sign-in"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="22"
                          height="22"
                          viewBox="0 0 25 24"
                          fill="none"
                          className="me-2"
                        >
                          <path
                            d="M8.98109 8.8C8.98268 8.18959 9.16655 7.59335 9.50946 7.08658C9.85237 6.57982 10.3389 6.18527 10.9077 5.95277C11.4765 5.72027 12.1019 5.66026 12.7051 5.78031C13.3082 5.90037 13.8619 6.1951 14.2963 6.62728C14.7307 7.05946 15.0263 7.6097 15.1457 8.2085C15.2652 8.80729 15.2031 9.42777 14.9673 9.99156C14.7315 10.5554 14.3327 11.0372 13.8211 11.3761C13.3095 11.7151 12.7082 11.896 12.093 11.896C11.6834 11.8971 11.2776 11.8176 10.899 11.6623C10.5204 11.507 10.1766 11.2789 9.88731 10.9911C9.59802 10.7033 9.36901 10.3615 9.21347 9.98543C9.05794 9.60938 8.97896 9.20649 8.98109 8.8ZM20.2115 18.64V17.664C20.2118 16.6534 19.9906 15.6549 19.5632 14.7377C19.1358 13.8204 18.5125 13.0064 17.7364 12.352C17.6677 12.2485 17.5757 12.1622 17.4676 12.1001C17.3596 12.0379 17.2384 12.0015 17.1138 11.9937C16.9891 11.9859 16.8643 12.007 16.7493 12.0553C16.6342 12.1035 16.532 12.1777 16.4508 12.2718C16.3696 12.366 16.3115 12.4776 16.2811 12.5978C16.2508 12.7181 16.249 12.8437 16.276 12.9647C16.3029 13.0857 16.3579 13.1989 16.4364 13.2953C16.515 13.3916 16.615 13.4686 16.7287 13.52C17.3331 14.031 17.8185 14.6663 18.1512 15.3818C18.4839 16.0973 18.656 16.876 18.6555 17.664V20.168C16.7947 21.6509 14.4796 22.4591 12.093 22.4591C9.70645 22.4591 7.39135 21.6509 5.53055 20.168V17.664C5.53552 16.5212 5.90143 15.4088 6.5768 14.4832C7.25216 13.5576 8.20299 12.8654 9.29551 12.504C10.2297 13.1989 11.3921 13.5218 12.5541 13.4093C13.7161 13.2968 14.7936 12.7571 15.5749 11.8961C16.3561 11.0352 16.7845 9.9154 16.7759 8.7569C16.7673 7.5984 16.3222 6.48502 15.5282 5.63566C14.7342 4.7863 13.6487 4.26241 12.4852 4.167C11.3216 4.07158 10.1642 4.41155 9.24045 5.12006C8.31671 5.82856 7.69349 6.85435 7.49333 7.99572C7.29316 9.1371 7.53053 10.3115 8.15876 11.288C6.9141 11.8414 5.85705 12.7398 5.11475 13.8752C4.37245 15.0106 3.97652 16.3346 3.97458 17.688V18.688C2.89466 17.3953 2.14412 15.8636 1.78633 14.2225C1.42854 12.5813 1.47402 10.8788 1.91893 9.25874C2.36383 7.63869 3.19509 6.14867 4.34251 4.91453C5.48992 3.68039 6.91979 2.73838 8.51134 2.16805C10.1029 1.59773 11.8094 1.41584 13.4867 1.63776C15.164 1.85967 16.7628 2.47887 18.1482 3.44306C19.5336 4.40724 20.6648 5.6881 21.4462 7.17744C22.2277 8.66678 22.6365 10.3209 22.6381 12C22.6403 14.4347 21.7815 16.793 20.2115 18.664V18.64ZM12.093 0C9.70125 0 7.36319 0.703788 5.3745 2.02236C3.38582 3.34094 1.83582 5.21508 0.920532 7.4078C0.00523983 9.60051 -0.234242 12.0133 0.232369 14.3411C0.698981 16.6689 1.85073 18.807 3.54197 20.4853C5.23321 22.1635 7.38798 23.3064 9.73379 23.7694C12.0796 24.2324 14.5111 23.9948 16.7208 23.0865C18.9305 22.1783 20.8192 20.6402 22.148 18.6668C23.4768 16.6934 24.186 14.3734 24.186 12C24.186 8.8174 22.912 5.76515 20.6441 3.51472C18.3762 1.26428 15.3003 0 12.093 0Z"
                            fill="white"
                          />
                        </svg>
                        Sign In
                      </Link>
                    </p>
                  )}
                  <p className="m-0 me-2">
                    <Link
                      href="/cart"
                      className="text-decoration-none text-white"
                      aria-label="cart"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="22"
                        height="22"
                        viewBox="0 0 32 24"
                        fill="none"
                        className="me-2"
                      >
                        <path
                          d="M27.9834 20.6771C27.9746 20.998 27.8411 21.3099 27.5999 21.5735C27.3586 21.8371 27.0202 22.0408 26.6271 22.159C26.234 22.2772 25.8037 22.3046 25.3902 22.2379C24.9766 22.1712 24.5982 22.0133 24.3024 21.7839C24.0065 21.5546 23.8064 21.264 23.7272 20.9487C23.6479 20.6334 23.693 20.3073 23.8567 20.0113C24.0205 19.7153 24.2957 19.4626 24.6478 19.2849C24.9999 19.1072 25.4132 19.0124 25.836 19.0123H26.0271C26.3118 19.0069 26.5945 19.0493 26.855 19.1364C27.1156 19.2236 27.3476 19.3534 27.5345 19.5165C27.7213 19.6796 27.8585 19.872 27.9361 20.08C28.0137 20.288 28.0299 20.5065 27.9834 20.7198V20.6771ZM10.9503 22.3845C10.5015 22.4016 10.0562 22.3161 9.67192 22.1392C9.28766 21.9622 8.98203 21.7019 8.79447 21.3918C8.60692 21.0817 8.54603 20.736 8.61968 20.3994C8.69333 20.0628 8.89812 19.7506 9.20765 19.5032C9.51717 19.2558 9.91722 19.0845 10.3562 19.0114C10.7952 18.9383 11.2529 18.9668 11.6704 19.0931C12.0878 19.2194 12.4459 19.4379 12.6983 19.7202C12.9507 20.0025 13.0859 20.3358 13.0865 20.6771C13.0925 21.1126 12.8711 21.5322 12.4708 21.8442C12.0705 22.1562 11.5238 22.3351 10.9503 22.3418V22.3845ZM9.48872 15.0511H27.5899C27.8172 15.0481 28.0368 14.9878 28.2139 14.8796C28.391 14.7714 28.5156 14.6214 28.5681 14.4535L31.5812 4.70399C31.6112 4.58898 31.6098 4.4705 31.5769 4.35593C31.544 4.24136 31.4804 4.13317 31.39 4.03809C31.2958 3.94538 31.1749 3.87026 31.0365 3.81847C30.8982 3.76669 30.746 3.7396 30.5918 3.73929H9.53369C9.25936 3.73929 8.99627 3.82204 8.80229 3.96933C8.60831 4.11663 8.49934 4.3164 8.49934 4.52471C8.49934 4.73302 8.60831 4.93279 8.80229 5.08009C8.99627 5.22738 9.25936 5.31013 9.53369 5.31013H29.3326L26.8254 13.4461H9.48872H9.28634L5.65486 0.640289C5.61321 0.46304 5.49177 0.302281 5.3113 0.185492C5.13084 0.0687024 4.90256 0.00313568 4.66548 0H1.1127C0.858405 0.0202139 0.622983 0.111229 0.451858 0.255482C0.280734 0.399736 0.186035 0.587004 0.186035 0.781153C0.186035 0.975302 0.280734 1.16257 0.451858 1.30682C0.622983 1.45108 0.858405 1.54209 1.1127 1.56231H3.85598L7.37504 13.9925C6.88827 14.2696 6.4997 14.6342 6.24415 15.0534C5.98861 15.4727 5.87409 15.9335 5.91087 16.3947C5.94764 16.8558 6.13455 17.3028 6.45485 17.6956C6.77514 18.0884 7.21881 18.4147 7.74606 18.6452C7.15172 19.2256 6.83458 19.942 6.84662 20.6771C6.81728 21.1051 6.90298 21.5332 7.09851 21.9354C7.29403 22.3375 7.59529 22.7051 7.98394 23.016C8.37258 23.3269 8.84048 23.5744 9.35915 23.7436C9.87782 23.9128 10.4364 24 11.0009 24C11.5654 24 12.124 23.9128 12.6426 23.7436C13.1613 23.5744 13.6292 23.3269 14.0179 23.016C14.4065 22.7051 14.7078 22.3375 14.9033 21.9354C15.0988 21.5332 15.1845 21.1051 15.1552 20.6771C15.1604 20.0755 14.9464 19.4846 14.5368 18.9696H22.4069C22.0013 19.4855 21.7912 20.0763 21.7998 20.6771C21.7704 21.1051 21.8561 21.5332 22.0517 21.9354C22.2472 22.3375 22.5485 22.7051 22.9371 23.016C23.3257 23.3269 23.7936 23.5744 24.3123 23.7436C24.831 23.9128 25.3896 24 25.9541 24C26.5186 24 27.0771 23.9128 27.5958 23.7436C28.1145 23.5744 28.5824 23.3269 28.971 23.016C29.3597 22.7051 29.6609 22.3375 29.8565 21.9354C30.052 21.5332 30.1377 21.1051 30.1083 20.6771C30.1509 20.1357 30.0024 19.5956 29.6783 19.1124C29.3542 18.6291 28.8661 18.2203 28.2645 17.9281C27.5683 17.6004 26.7675 17.4233 25.9484 17.4159H9.48872C9.08698 17.3903 8.71256 17.251 8.43966 17.0257C8.16676 16.8004 8.0153 16.5054 8.0153 16.1993C8.0153 15.8932 8.16676 15.5982 8.43966 15.3729C8.71256 15.1476 9.08698 15.0083 9.48872 14.9828V15.0511Z"
                          fill="white"
                        />
                      </svg>
                      My Cart
                    </Link>
                  </p>
                </div>
              </div>
            </div>
          </nav>
        </div>
        <div className="navbar_center_section">
          <nav className="navbar navbar-expand-lg py-0 py-lg-3">
            <div className="container-fluid">
              <Link
                className="navbar-brand me-2 m-0 ms-xl-2 text-uppercase"
                href="/"
                aria-label="Blinds.com"
              >
                Blinds.com
              </Link>
              <button
                className="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarSupported"
                aria-controls="navbarSupported"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <svg
                  width="20px"
                  height="20px"
                  viewBox="0 0 16 16"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="#fff"
                >
                  <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M14 5H2V3h12v2zm0 4H2V7h12v2zM2 13h12v-2H2v2z"
                  />
                </svg>
              </button>
              <div
                className="collapse navbar-collapse justify-content-md-end"
                id="navbarSupported"
              >
                <div className="input-search position-relative mx-auto d-none d-md-block">
                  <input
                    className="form-control me-2"
                    type="search"
                    placeholder="What can we help you ?"
                    aria-label="Search"
                    id="search"
                    name="search"
                    autoComplete="off"
                  />
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 23 23"
                    fill="none"
                    className="position-absolute bottom-0 end-0 my-3 me-3"
                  >
                    <path
                      d="M1.90769 9.15005C1.90769 7.81149 2.329 6.503 3.11833 5.39004C3.90766 4.27707 5.02957 3.40962 6.34218 2.89738C7.65479 2.38514 9.09915 2.25111 10.4926 2.51225C11.8861 2.77339 13.1661 3.41796 14.1707 4.36446C15.1753 5.31096 15.8595 6.51687 16.1367 7.82971C16.4138 9.14254 16.2716 10.5033 15.7279 11.74C15.1842 12.9766 14.2634 14.0336 13.0821 14.7773C11.9008 15.521 10.5119 15.9179 9.09118 15.9179C7.186 15.9179 5.35885 15.2048 4.01169 13.9356C2.66452 12.6664 1.90769 10.945 1.90769 9.15005ZM22.7111 20.7817L16.2747 14.6726C17.7583 12.9556 18.4852 10.7673 18.3054 8.55975C18.1255 6.35222 17.0526 4.29409 15.3083 2.81049C13.5639 1.3269 11.2813 0.531188 8.9321 0.587718C6.58286 0.644249 4.34641 1.54871 2.6847 3.11426C1.023 4.67981 0.0629939 6.78686 0.00299143 9.00017C-0.057011 11.2135 0.787573 13.3639 2.36228 15.0074C3.93699 16.6508 6.12152 17.6617 8.46464 17.8311C10.8077 18.0005 13.1304 17.3156 14.9529 15.9179L21.4372 22.027C21.5211 22.1071 21.621 22.1707 21.7311 22.2141C21.8413 22.2574 21.9595 22.2797 22.0789 22.2797C22.1971 22.2806 22.3141 22.2586 22.4229 22.2152C22.5316 22.1717 22.6297 22.1077 22.7111 22.027C22.8022 21.9476 22.8749 21.8513 22.9246 21.7441C22.9743 21.637 23 21.5213 23 21.4043C23 21.2874 22.9743 21.1717 22.9246 21.0646C22.8749 20.9574 22.8022 20.8611 22.7111 20.7817Z"
                      fill="#139AD6"
                    />
                  </svg>
                </div>
                <div className="d-flex">
                  <ul className="navbar-nav">
                    <li className="nav-item">
                      <a
                        className="nav-link"
                        href="#"
                        aria-label="Free Shipping*"
                      >
                        Free Shipping*
                      </a>
                    </li>
                    <li className="nav-item">
                      <a
                        className="nav-link"
                        href="#"
                        aria-label="100% Satisfaction Guarantee"
                      >
                        100% Satisfaction Guarantee
                      </a>
                    </li>
                    <li className="nav-item">
                      <a className="nav-link" href="#" aria-label="SureFit™">
                        SureFit™
                      </a>
                    </li>
                    <li className="nav-item nav-phone">
                      <a
                        className="nav-link d-flex"
                        href="#"
                        aria-label="Free Samples"
                      >
                        Free Samples
                        <p className="m-0">
                          Want Help?
                          <span lang="es">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="15"
                              height="15"
                              viewBox="0 0 15 15"
                              fill="none"
                              className="me-1"
                            >
                              <path
                                d="M2.86979 6.51284C4.00979 8.83122 5.8425 10.7277 8.08687 11.9074L9.82854 10.101C10.0463 9.87572 10.359 9.81018 10.6321 9.9003C11.5188 10.2034 12.4727 10.3672 13.4583 10.3672C13.8977 10.3672 14.25 10.7318 14.25 11.1865V14.0537C14.25 14.5084 13.8977 14.8729 13.4583 14.8729C6.02458 14.8729 0 8.6387 0 0.946275C0 0.491611 0.35625 0.12706 0.791667 0.12706H3.5625C4.00187 0.12706 4.35417 0.491611 4.35417 0.946275C4.35417 1.9662 4.5125 2.95335 4.80542 3.87087C4.8925 4.1535 4.82917 4.47709 4.61146 4.70238L2.86979 6.51284Z"
                                fill="#139AD6"
                              />
                            </svg>
                            800-505-1905
                          </span>
                        </p>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </nav>
        </div>
        <div className="navbar_bottom_section">
          <nav className="navbar navbar-expand-lg">
            <div className="container-fluid">
              <div className="collapse navbar-collapse m-0 ms-xl-4">
                <ul className="navbar-nav">
                  <li className="nav-item dropdown">
                    <Link className="nav-link text-white" href="/product">
                      All Products
                    </Link>
                  </li>

                  <li className="nav-item dropdown">
                    <Link className="nav-link text-white" href="/product/id">
                      Motorized
                    </Link>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </section>
  );
};

export default Header;
